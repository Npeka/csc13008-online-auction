enum OrderStatus {
  PENDING_PAYMENT
  PAYMENT_SUBMITTED
  PAYMENT_CONFIRMED
  SHIPPED
  DELIVERED
  COMPLETED
  CANCELLED
}

// Order/Transaction management after auction ends
model Order {
  id         String      @id @default(cuid())
  finalPrice Float
  status     OrderStatus @default(PENDING_PAYMENT)

  // Shipping information
  shippingAddress String?
  trackingNumber  String?

  // Relations
  productId String  @unique
  product   Product @relation(fields: [productId], references: [id])
  buyerId   String
  buyer     User    @relation("OrderBuyer", fields: [buyerId], references: [id])
  sellerId  String
  seller    User    @relation("OrderSeller", fields: [sellerId], references: [id])

  // Chat and ratings
  messages ChatMessage[]
  ratings  Rating[]

  // Timestamps
  createdAt   DateTime  @default(now())
  paidAt      DateTime?
  shippedAt   DateTime?
  deliveredAt DateTime?
  completedAt DateTime?
  updatedAt   DateTime  @updatedAt

  @@map("orders")
}
